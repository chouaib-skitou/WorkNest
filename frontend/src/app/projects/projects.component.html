<!-- projects.component.html -->
<div class="projects-container">
  <h1>Projects</h1>

  <div class="filters">
    <input
      type="text"
      [(ngModel)]="searchTerm"
      (input)="applyFilters()"
      placeholder="Search projects..."
      class="search-input"
    />

    <select
      [(ngModel)]="statusFilter"
      (change)="applyFilters()"
      class="filter-select"
    >
      <option value="All">All Statuses</option>
      <option *ngFor="let status of statusOptions" [value]="status">
        {{ formatStatus(status) }}
      </option>
    </select>

    <select
      [(ngModel)]="priorityFilter"
      (change)="applyFilters()"
      class="filter-select"
    >
      <option value="All">All Priorities</option>
      <option *ngFor="let priority of priorityOptions" [value]="priority">
        {{ formatPriority(priority) }}
      </option>
    </select>
  </div>

  <!-- Loading indicator -->
  <div *ngIf="loading" class="loading-indicator">
    Loading projects...
  </div>

  <!-- Error message -->
  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <!-- No results message -->
  <div *ngIf="!loading && !error && filteredProjects.length === 0" class="no-results">
    No projects found matching your criteria.
  </div>

  <div class="projects-grid" *ngIf="!loading && filteredProjects.length > 0">
    <a
      *ngFor="let project of filteredProjects"
      [routerLink]="['/projects', project.id]"
      class="project-card"
    >
      <h2>{{ project.name }}</h2>
      <p>{{ project.description }}</p>
      <div class="project-details">
        <span
          class="status"
          [ngClass]="getStatusClass(project.status)"
        >{{ formatStatus(project.status) }}</span>
        <span 
          class="priority" 
          [ngClass]="getPriorityClass(project.priority)"
        >{{ formatPriority(project.priority) }}</span>
      </div>
      <div class="project-meta">
        <span class="due-date"
          >Due: {{ project.dueDate | date: 'mediumDate' }}</span
        >
        <span class="assignee">Assigned to: {{ getAssigneeName(project) }}</span>
      </div>
    </a>
  </div>

  <!-- Pagination -->
  <div class="pagination" *ngIf="totalPages > 1">
    <button
      class="pagination-button"
      [disabled]="currentPage === 1"
      (click)="changePage(currentPage - 1)"
    >
      Previous
    </button>

    <div class="page-numbers">
      <ng-container *ngFor="let page of getPages()">
        <button
          *ngIf="page !== '...'"
          class="page-number"
          [class.active]="page === currentPage"
          (click)="changePage(page)"
        >
          {{ page }}
        </button>
        <span *ngIf="page === '...'" class="ellipsis">...</span>
      </ng-container>
    </div>

    <button
      class="pagination-button"
      [disabled]="currentPage === totalPages"
      (click)="changePage(currentPage + 1)"
    >
      Next
    </button>
  </div>
</div>